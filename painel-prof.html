<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Painel Professor</title>

<style>
body{
background:#020617;
color:white;
font-family:Arial;
padding:30px;
}

.card{
background:#1e293b;
padding:20px;
border-radius:10px;
max-width:500px;
margin:auto;
}

input{
width:100%;
padding:10px;
margin-top:10px;
border-radius:6px;
border:none;
}

button{
margin-top:15px;
width:100%;
padding:12px;
background:orange;
border:none;
color:white;
font-weight:bold;
border-radius:6px;
}
</style>
</head>

<body>

<div class="card">

<h2>ğŸ‘¨â€ğŸ« Painel Professor</h2>

<input id="titulo" placeholder="TÃ­tulo da Aula">
<input id="video" placeholder="Link Youtube Incorporado">
<input type="file" id="pdf">

<button onclick="criarAula()">Criar Aula</button>

<button id="logout">Sair</button>

</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import {
getAuth,
onAuthStateChanged,
signOut
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

import {
getFirestore,
collection,
addDoc
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

import {
getStorage,
ref,
uploadBytes,
getDownloadURL
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js";

const firebaseConfig = {
apiKey:"AIzaSyBp4HTngTmzi3Kh2ejMSURnU8ctJoTJ1ms",
authDomain:"dom-music-127a8.firebaseapp.com",
projectId:"dom-music-127a8",
storageBucket:"dom-music-127a8.appspot.com",
messagingSenderId:"412932629110",
appId:"1:412932629110:web:f6122e06eb77179a3f3557"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);
const storage = getStorage(app);

onAuthStateChanged(auth,(user)=>{
if(!user){
window.location.href="index.html";
}
});

window.criarAula = async function(){

const titulo=document.getElementById("titulo").value;
const video=document.getElementById("video").value;
const file=document.getElementById("pdf").files[0];

let pdfURL="";

if(file){
const storageRef=ref(storage,"materiais/"+file.name);
await uploadBytes(storageRef,file);
pdfURL=await getDownloadURL(storageRef);
}

await addDoc(collection(db,"aulas"),{
titulo,
video,
pdfURL
});

alert("Aula criada!");
}

document.getElementById("logout")
.addEventListener("click",()=>{
signOut(auth).then(()=>{
window.location.href="index.html";
});
});

</script>

</body>
</html>